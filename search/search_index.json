{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Kubernetes RBAC can sometimes appear to be some sort of black magic. So, let's look behind the curtain. Snippets \u00b6 We all love YAML, right? Here's a collection of annotated RBAC-related YAML snippets you can build on. Re-use roles \u00b6 To re-use a role across namespaces, first define a cluster role, for example, to view services , using: 1 2 3 4 5 6 7 8 9 10 11 12 apiVersion : rbac.authorization.k8s.io/v1 kind : ClusterRole metadata : name : perm-svc-view rules : - apiGroups : - \"\" resources : - services verbs : - get - list Assign above cluster role to user greta , allowing her to view services in the namespace dev123 using: 1 2 3 4 5 6 7 8 9 10 11 12 13 apiVersion : rbac.authorization.k8s.io/v1 kind : RoleBinding metadata : name : assign-perm-greta-svc-view namespace : dev123 roleRef : apiGroup : rbac.authorization.k8s.io kind : ClusterRole name : perm-svc-view subjects : - apiGroup : rbac.authorization.k8s.io kind : User name : greta Tip To validate if the permissions have been granted, have a look at checking for permissions . Commands \u00b6 Some kubectl commands that might come in handy. Checking for permissions \u00b6 Can the user greta list services in the namespace dev123 ? 1 2 3 4 $ kubectl auth can-i \\ list services \\ --as = greta \\ --namespace = dev123 Can the service account dummy create services in the namespace danger ? 1 2 3 4 $ kubectl auth can-i \\ create services \\ --as = system:serviceaccount:danger:dummy \\ --namespace = danger","title":"Base"},{"location":"#snippets","text":"We all love YAML, right? Here's a collection of annotated RBAC-related YAML snippets you can build on.","title":"Snippets"},{"location":"#re-use-roles","text":"To re-use a role across namespaces, first define a cluster role, for example, to view services , using: 1 2 3 4 5 6 7 8 9 10 11 12 apiVersion : rbac.authorization.k8s.io/v1 kind : ClusterRole metadata : name : perm-svc-view rules : - apiGroups : - \"\" resources : - services verbs : - get - list Assign above cluster role to user greta , allowing her to view services in the namespace dev123 using: 1 2 3 4 5 6 7 8 9 10 11 12 13 apiVersion : rbac.authorization.k8s.io/v1 kind : RoleBinding metadata : name : assign-perm-greta-svc-view namespace : dev123 roleRef : apiGroup : rbac.authorization.k8s.io kind : ClusterRole name : perm-svc-view subjects : - apiGroup : rbac.authorization.k8s.io kind : User name : greta Tip To validate if the permissions have been granted, have a look at checking for permissions .","title":"Re-use roles"},{"location":"#commands","text":"Some kubectl commands that might come in handy.","title":"Commands"},{"location":"#checking-for-permissions","text":"Can the user greta list services in the namespace dev123 ? 1 2 3 4 $ kubectl auth can-i \\ list services \\ --as = greta \\ --namespace = dev123 Can the service account dummy create services in the namespace danger ? 1 2 3 4 $ kubectl auth can-i \\ create services \\ --as = system:serviceaccount:danger:dummy \\ --namespace = danger","title":"Checking for permissions"}]}